---
title: "Projet IF36 - Analyse des donn√©es de Kickstarter"
output:
  prettydoc::html_pretty:
    theme: hpstr
    highlight: github
---

L'objectif de ce projet d'IF36 est d'analyser et de pr√©senter des donn√©es issues d'un jeu de donn√©es de notre choix.

## üë• Membres

√âquipe Civizualisation :

- Florian BONELLI
- Eyvan FAURE
- Ryan OUYED
- Lucas SAURON

## üìö Sommaire

- üìù Contexte des donn√©es choisis
- üì• T√©l√©chargement des donn√©es
- üìÅ Pr√©sentation des donn√©es
- üìä Plan d'analyse
- üß≠ Exploration des donn√©es

## üìù Contexte des donn√©es choisis

[![Kickstarter](https://i.kickstarter.com/tq0sfld-kickstarter-logo-green.png?origin=static&sig=f4aHZ5ZiQhwZCgzBFzJqR3WIwCUT6jVw6mALfOHvmu0%3D)](https://www.kaggle.com/datasets/kemical/kickstarter-projects?select=ks-projects-201801.csv)

Nous avons choisi d'utiliser les donn√©es du site de financement participatif Kickstarter.

Kickstarter offre l'opportunit√© √† des cr√©ateurs de transformer des id√©es en r√©alit√© gr√¢ce au financement participatif.

Cette plateforme permet de lever des fonds pour financer des projets en mettant en relation des contributeurs du monde entier.

Nous avons d√©cid√© d'utiliser le jeu de donn√©es [Kickstarter Projects](https://www.kaggle.com/datasets/kemical/kickstarter-projects) disponible sur Kaggle.

Ces donn√©es sont collect√©es depuis la plateforme [Kickstarter](https://www.kickstarter.com/).

Ce projet nous permettra d'explorer les tendances du financement participatif, d'identifier les facteurs qui influencent le succ√®s d'un projet et d'√©valuer la probabilit√© de r√©ussite des campagnes sur cette plateforme.

Nous chercherons √©galement √† visualiser ces donn√©es de mani√®re claire et intuitive pour mieux comprendre les dynamiques du financement participatif.

## üì• T√©l√©chargement des donn√©es

Les donn√©es utilis√©es dans ce projet ne sont pas incluses dans ce d√©p√¥t en raison de leur taille.

Il faut les t√©l√©charger manuellement.

Suivez les √©tapes ci-dessous pour r√©cup√©rer les fichiers n√©cessaires :

1. T√©l√©chargez l'archive contenant les jeux de donn√©es.

    ``` bash
    curl -L -o ./data/kickstarter-projects.zip https://www.kaggle.com/api/v1/datasets/download/kemical/kickstarter-projects
    ```

2. Une fois l'archive t√©l√©charg√©e, extrayez les fichiers.

    ``` bash
    unzip ./data/kickstarter-projects.zip -d ./data
    ```

    Si `unzip` n'est pas install√©, vous pouvez l'installer avec la commande suivante

    ``` bash
    sudo apt-get install unzip
    ```

3. (Facultatif) Apr√®s avoir extrait les fichiers, vous pouvez supprimer l'archive pour lib√©rer de l'espace.

    ``` bash
    rm ./data/kickstarter-projects.zip
    ```

## üìÅ Pr√©sentation des donn√©es

### Premier fichier : `ks-projects-201612.csv`

Ce premier jeu de donn√©es au format CSV (Comma-Separated Values) contient 321 616 individus et 17 variables.

| Variable | Type de donn√©es | Description |
|------------------|------------------|------------------------------------|
| `ID` | Integer | Identifiant unique du projet |
| `name` | String | Nom du projet |
| `category` | String | Cat√©gorie sp√©cifique du projet |
| `main_category` | String | Cat√©gorie principale du projet |
| `currency` | String | Devise utilis√©e pour le financement |
| `deadline` | Date | Date limite pour la collecte des fonds |
| `goal` | Float | Montant que le projet esp√®re r√©colter |
| `launched` | Date and time | Date et heure de lancement du projet |
| `pledged` | Float | Somme totale engag√©e par les contributeurs |
| `state` | String | √âtat de la campagne (ex : "failed", "successful") |
| `backers` | Integer | Nombre de contributeurs |
| `country` | String | Pays o√π le projet est lanc√© (ISO 3166) |
| `usd pledged` | Float | Montant collect√© en USD (conversion r√©alis√©e par Kickstarter) |
| NA | NA | NA |
| NA | NA | NA |
| NA | NA | NA |
| NA | NA | NA |

On remarque que les 4 derni√®res variables sont sans titre et sans donn√©es.

### Deuxi√®me fichier : `ks-projects-201801.csv`

Ce deuxi√®me jeu de donn√©es au format CSV (Comma-Separated Values) contient 375 765 individus et 15 variables.

| Variable | Type de donn√©es | Description |
|------------------|------------------|------------------------------------|
| `ID` | Integer | Identifiant unique du projet |
| `name` | String | Nom du projet |
| `category` | String | Cat√©gorie sp√©cifique du projet |
| `main_category` | String | Cat√©gorie principale du projet |
| `currency` | String | Devise utilis√©e pour le financement |
| `deadline` | Date | Date limite pour la collecte des fonds |
| `goal` | Float | Montant que le projet esp√®re r√©colter |
| `launched` | Date and time | Date et heure de lancement du projet |
| `pledged` | Float | Somme totale engag√©e par les contributeurs |
| `state` | String | √âtat de la campagne (ex : "failed", "successful") |
| `backers` | Integer | Nombre de contributeurs |
| `country` | String | Pays o√π le projet est lanc√© (ISO 3166) |
| `usd pledged` | Float | Montant collect√© en USD (conversion r√©alis√©e par Kickstarter) |
| `usd_pledged_real` | Float | Montant collect√© en USD (conversion r√©alis√©e par l'API fixer.io) |
| `usd_goal_real` | Float | Montant que le projet esp√®re collecter en USD (conversion r√©alis√©e par l'API fixer.io) |

Ce fichier contient plus d'individus que le premier, exclut les variables inutiles et ajoute deux variables suppl√©mentaires par rapport au premier fichier.

En observant juste les noms des fichiers, il est raisonnable de supposer que le fichier `ks-projects-201612.csv` contient des donn√©es jusqu'en d√©cembre 2016, tandis que le fichier `ks-projects-201801.csv` inclut des donn√©es jusqu'en janvier 2018. Une v√©rification sera n√©cessaire pour s'assurer qu'il n'y a pas de doublons entre les individus pr√©sents dans ces deux fichiers.

De plus, si c'est le cas, le fichier de 2018 semble √™tre plus pertinent √† utiliser seul. En effet, il ne comporte pas les variables vides pr√©sentes dans le fichier de 2016, inclut deux variables suppl√©mentaires (`usd_pledged_real` et `usd_goal_real`), contient un plus grand nombre d'individus et propose des donn√©es plus r√©centes.

## üìä Plan d'analyse

### üéØ Objectif principal de l'analyse

L'objectif principal de notre analyse est de comprendre les dynamiques du financement participatif sur Kickstarter. Plus pr√©cis√©ment, nous cherchons √† identifier des tendances utiles pour optimiser les chances de succ√®s des projets afin de d√©gager les facteurs qui influencent la r√©ussite ou l'√©chec d'une campagne.

### üîç Questions d'analyse

- Quels sont les taux de r√©ussite des campagnes selon les cat√©gories ?
- Dans quelle mesure le montant de l'objectif influence-t-il la probabilit√© de succ√®s d'une campagne ?
- Existe-t-il des p√©riodes de l'ann√©e o√π les campagnes ont plus de chances de r√©ussir ?
- Quels sont les pays o√π le plus de campagnes sont cr√©√©es? Parmi eux, lesquels ont les meilleurs taux de r√©ussite?
- L'√©cart entre l'objectif initial et les fonds r√©ellement collect√©s varie-t-il en fonction de la cat√©gorie ou de la devise utilis√©e ?
- Le choix des mots dans le titre d'une campagne a-t-il un impact sur son succ√®s ?
- Comment a √©volu√© le taux de r√©ussite et le nombre de campagne au fil des ann√©es? Les campagnes sont elles plus ambitieuses qu'avant?

### üìà Variables √† comparer

Pour r√©pondre √† nos questions d'analyse, nous comparerons les variables suivantes :

- **Taux de r√©ussite et d'√©chec par cat√©gorie** : Identifier les cat√©gories o√π les campagnes r√©ussissent ou √©chouent le plus souvent.
- **Taux de r√©ussite et d'√©chec en fonction du montant de l'objectif** : Analyser l'impact du montant demand√© sur le succ√®s ou l'√©chec des campagnes.
- **Taux de r√©ussite et d'√©chec selon la p√©riode de lancement** : √âtudier si certaines p√©riodes de l'ann√©e influencent les chances de succ√®s ou d'√©chec.
- **Nombre de campagnes cr√©√©es et leur taux de r√©ussite selon le pays**: Comparer les pays o√π les campagnes sont les plus populaires pour observer des diff√©rences de nombres de campagnes et de taux de r√©ussite selon les r√©gions.
- **√âcart entre le montant collect√© et l'objectif fix√©** : Comparer les fonds esp√©r√©s et les fonds r√©ellement obtenus pour √©valuer les √©carts.
- **Impact des mots-cl√©s dans les titres sur le succ√®s** : Identifier les mots les plus fr√©quents dans les titres des campagnes r√©ussies et leur influence.
- **Nombre de campagnes r√©ussies montant moyen r√©colt√© par campagne r√©ussie selon l'ann√©e** : Comparer le nombre de campagnes r√©ussies et leur valeur moyenne chaque ann√©e pour d√©gager des tendances.

Ces comparaisons nous permettront de mieux comprendre les facteurs influen√ßant le succ√®s des campagnes Kickstarter.

### ‚ö†Ô∏è Limitations et probl√®mes potentiels

- Certains porteurs de projets peuvent fixer des objectifs volontairement bas pour maximiser leurs chances de succ√®s ou, au contraire, volontairement √©lev√© par manque de s√©rieux, ce qui pourrait biaiser les r√©sultats de l'analyse.

- Les taux de conversion en USD peuvent introduire des biais en fonction des fluctuations des taux de change et de l'inflation.

- Des facteurs externes, tels que les tendances √©conomiques ou m√©diatiques, qui ne sont pas inclus dans les donn√©es, peuvent √©galement influencer le succ√®s des campagnes.

## üß≠ Exploration des donn√©es

Pour effectuer notre analyse, nous utilisons les libraries suivantes :

```{r echo=FALSE, warning=FALSE, cache=TRUE, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r message=FALSE, warning=FALSE}
library(ggplot2) # Pour la visualisation des donn√©es
library(dplyr) # Pour la manipulation des donn√©es
library(readr) # Pour la lecture des fichiers CSV
library(tidyr) # Pour le nettoyage et la transformation des donn√©es
library(scales) # Pour passer les √©chelles en nombres √† virgule
library(stringr) # Pour l'analyse du texte
library(tidytext) # Pour l'analyse du texte
library(syuzhet) # Pour l'analyse √©motionnelle du texte
library(GGally) # Pour les matrices de donn√©es
library(ggcorrplot) # Pour les matrices de corr√©lation
library(countrycode) # Pour les noms de pays entiers
library(maps) # Pour la carte du monde
library(lubridate) # Pour traiter les dates
library(ggrepel) # Pour l'espacement des l√©gendes sur ggplot
library(gridExtra) # Pour afficher plusieurs graphiques c√¥te √† c√¥te
library(treemapify) # Pour des graphiques en treemap
library(forcats) # Pour des les chats
```

Nous chargeons les deux fichiers de donn√©es √† notre disposition pour notre analyse :

```{r message=FALSE, warning=FALSE}
data2016 <- read_csv("./data/ks-projects-201612.csv", show_col_types = FALSE)
data2018 <- read_csv("./data/ks-projects-201801.csv", show_col_types = FALSE)
```

### Nettoyage des donn√©es

Assurons nous que nos donn√©es ne contiennent aucun individus doublon Pour cela nous allons utiliser la variable ID qui se veut unique pour chaque individu

Regardons tout d'abord si dans chaque fichier, un individu n'a pas de doublon dans le m√™me fichier

Pour v√©rifier le nombre d'IDs uniques et les doublons dans les fichiers `ks-projects-201612.csv` et `ks-projects-201801.csv`, nous allons effectuer les √©tapes suivantes :

Nous comptons le nombre total d'IDs, le nombre d'IDs uniques, et calculons le nombre d'IDs en doublon en soustrayant les IDs uniques des IDs totaux.

```{r echo=FALSE}
cat("Nombre d'IDs uniques dans ks-projects-201612.csv :", length(unique(data2016$ID)), "\n")
cat("Nombre d'IDs dans ks-projects-201612.csv :", length(data2016$ID), "\n")
cat("Nombre d'IDs doublon dans ks-projects-201612.csv :", length(data2016$ID) - length(unique(data2016$ID)), "\n")
```

```{r echo=FALSE}
cat("Nombre d'IDs uniques dans ks-projects-201801.csv :", length(unique(data2018$ID)), "\n")
cat("Nombre d'IDs dans ks-projects-201801.csv :", length(data2018$ID), "\n")
cat("Nombre d'IDs doublon dans ks-projects-201801.csv :", length(data2018$ID) - length(unique(data2018$ID)), "\n")
```

Nous avons aucun doublons dans chacun de nos 2 fichiers.

Maintenant si on regarde nos 2 fichiers dans leur ensemble, regardons si nous avons des ids de 2016 qui sont dans 2018 et inversement.

```{r}
cat("IDs uniquement pr√©sents dans ks-projects-201612.csv :", length(setdiff(data2016$ID, data2018$ID)), "\n")
cat("IDs uniquement pr√©sents dans ks-projects-201801.csv :", length(setdiff(data2018$ID, data2016$ID)), "\n")
```

On peut observer que le nombre d'id dans data2016 qui ne se trouvent pas dans data2018 est √©gal √† 0. Autrement dit, toutes les individus du fichier data2016 se trouvent dans data2018.

Nous d√©cidons donc d'utiliser uniquement le fichier `ks-projects-201801.csv`, car il contient davantage de donn√©es et contient d√©j√† les donn√©es pr√©sentes dans le fichier `ks-projects-201612.csv`.

```{r}
data_kickstarter <- data2018
```

#### V√©rifions s'il y a des lignes enti√®rement vides

```{r}
cat(sum(rowSums(is.na(data_kickstarter)) == ncol(data_kickstarter)))
```

#### Nettoyage des individus comportant des valeurs NA

```{r}
print(sapply(data_kickstarter, function(x) sum(is.na(x))))

data_kickstarter <- data_kickstarter %>%
  drop_na()

print(sapply(data_kickstarter, function(x) sum(is.na(x))))
```

#### Nettoyage des individus comportant des valeurs non valides

```{r}
data_kickstarter <- data_kickstarter %>%
  filter(state != "undefined")

data_kickstarter <- data_kickstarter %>%
  filter(country != "N,0\"")
```

#### Conversion de la caract√©ristique "launched" en format Date

```{r}
data_kickstarter$launched <- as.Date(data_kickstarter$launched)
```

#### Nettoyage des individus dont la date de lancement est incoh√©rente

```{r}
data_kickstarter <- data_kickstarter %>%
  filter(year(launched) >= 2009)
```

#### Ajout du jour et du mois de la date de lancement et de la deadline

```{r}
data_kickstarter <- data_kickstarter %>%
  mutate(
    launch_day = day(launched),
    launch_month = month(launched, label = TRUE, abbr = FALSE),
    launch_year = as.character(year(launched)),
    deadline_day = day(deadline),
    deadline_month = month(deadline, label = TRUE, abbr = FALSE),
    deadline_year = as.character(year(deadline)),
    duree_campagne = as.numeric(as.Date(deadline) - as.Date(launched)),
  )
```

#### Conversion des codes pays en noms de pays anglais

```{r}
data_kickstarter <- data_kickstarter %>%
  mutate(
    country = countrycode(country, origin = "iso2c", destination = "country.name.en"),
    country = case_when(
      country == "Hong Kong SAR China" ~ "Hong Kong",
      country == "United States" ~ "USA",
      TRUE ~ country
    ),
  )
```

### Pr√©sentation du dataset

Notre dataset pr√©sente l'ensemble des projets lanc√©s sur la plateforme Kickstarter depuis son ouverture en avril 2009 jusqu'au 2 janvier 2018.

On y trouve notamment les dates de lancement des projets, leur cat√©gorie, leur pays d'origine, les montants demand√©s et r√©colt√©s par chaque projet et leur √©tat d'avancement.

```{r}
glimpse(data_kickstarter)
```

Les projets Kickstarter sont de diff√©rentes natures, on y trouve majoritairement des projets culturels et artistiques mais √©galement des projets technologiques ou de financement de petites entreprises. Voyons les cat√©gories les plus populaires du dataset :

```{r}
data_kickstarter %>%
  count(main_category, name = "total") %>%
  ggplot(
    aes(
      x = reorder(main_category, total),
      y = total,
    )
  ) +
  geom_col(
    fill = "steelblue",
  ) +
  scale_y_continuous(
    breaks = seq(0, 70000, 10000),
    labels = label_comma(big.mark = " "),
  ) +
  labs(
    title = "Nombre total de campagnes Kickstarter par cat√©gorie entre 2009 et 2018",
    x = "Cat√©gorie",
    y = "Nombre total de campagnes",
  ) +
  theme_minimal() +
  coord_flip()
```

Tous les projets doivent d√©finir un "Objectif" (`goal`), qui est la somme d'argent minimale pour que le projet soit consid√©r√© comme financ√©. Pendant la dur√©e de la campagne, les utilisateurs de Kickstarter peuvent donner de l'argent au projet. La somme totale r√©colt√©e par le projet est visible dans la colonne `pledged` du dataset.

Cependant, ces valeurs mon√©taires sont donn√©es dans leur devise d'origine.

Pour que les comparaisons selon la devise aient plus de sens, les colonnes `usd_goal_real` et `usd_pledged_real` font la conversion des sommes en dollar √©tasunien (USD)

Voici les distributions des projets selon leur objectif `goal` et les sommes r√©ellement r√©colt√©es `pledged`

```{r}
grid.arrange(
  # Histogramme du montant cible (goal)
  data_kickstarter %>%
    ggplot(
      aes(
        x = usd_goal_real,
      )
    ) +
    geom_histogram(
      binwidth = 5000,
      fill = "steelblue",
      color = "white",
      boundary = 0,
      closed = "left",
    ) +
    scale_x_continuous(
      limits = c(0, 100000),
      breaks = seq(0, 100000, 20000),
      labels = label_comma(big.mark = " "),
    ) +
    scale_y_continuous(
      labels = label_comma(big.mark = " "),
    ) +
    labs(
      title = "Montants cibles des campagnes Kickstarter",
      x = "Montant cible ('goal') en USD",
      y = "Nombre de campagnes",
    ) +
    theme_minimal(),
  # Histogramme du montant r√©colt√© (pledged)
  data_kickstarter %>%
    ggplot(
      aes(
        x = usd_pledged_real,
      )
    ) +
    geom_histogram(
      binwidth = 5000,
      fill = "forestgreen",
      color = "white",
      boundary = 0,
      closed = "left",
    ) +
    scale_x_continuous(
      limits = c(0, 100000),
      breaks = seq(0, 100000, 20000),
      labels = label_comma(big.mark = " "),
    ) +
    scale_y_continuous(
      labels = label_comma(big.mark = " "),
    ) +
    labs(
      title = "Montants r√©colt√©s des campagnes Kickstarter",
      x = "Montant r√©colt√© ('pledged') en USD",
      y = "Nombre de campagnes",
    ) +
    theme_minimal(),
ncol = 2)
```

Chose √©trange : Il y a davantage de projets avec des petits objectifs que de projets avec peu de fonds r√©colt√©s. Cela est peu r√©aliste, il faut voir s'il y a un probl√®me avec le dataset.

Chaque financeur est appel√© un `backer`. Le dataset associe √† chaque projet la quantit√© de personnes qui l'ont financ√© :

```{r}
data_kickstarter %>%
  ggplot(
    aes(
      x = backers,
    )
  ) +
  geom_histogram(
    binwidth = 500,
    fill = "steelblue",
    color = "white",
    boundary = 0,
    closed = "left",
  ) +
  scale_x_continuous(
    limits = c(0, 10000),
    breaks = seq(0, 10000, 1000),
    labels = label_comma(big.mark = " "),
  ) +
  scale_y_continuous(
    limits = c(0, 1200),
    breaks = seq(0, 1200, 200),
    labels = label_comma(big.mark = " "),
  ) +
  labs(
    title = "Distribution du nombre de backers par projet",
    x = "Nombre de backers",
    y = "Nombre de projets",
  ) +
  theme_minimal()
```

Chaque projet ne peut √™tre financ√© que dans un temps imparti, situ√© entre le lancement de la campagne (`launched`) et sa cl√¥ture (`deadline`). Aucun financement suppl√©mentaire n'est accept√© au del√† de la cl√¥ture de la campagne.

Dans les visualisations suivantes, nous allons voir la quantit√© de projets lanc√©s chaque ann√©e et les dur√©es des campagnes de notre dataset.

```{r}
data_kickstarter %>%
  count(launch_year, name = "total") %>%
  ggplot(
    aes(
      x = as.factor(launch_year),
      y = total,
      label = total,
    )
  ) +
  geom_col(
    fill = "steelblue",
  ) +
  geom_text(
    aes(label = comma(total, big.mark = " ")),
    vjust = -0.3,
    size = 3,
  ) +
  scale_y_continuous(
    limits = c(0, 80000),
    breaks = c(seq(0, 80000, 20000)),
    labels = label_comma(big.mark = " "),
  ) +
  labs(
    title = "Nombre de projets lanc√©s chaque ann√©e",
    x = "Ann√©e",
    y = "Nombre de projets",
  ) +
  theme_minimal() +
  theme(
    panel.grid.minor = element_blank(),
  )
```

```{r}
data_kickstarter %>%
  ggplot(
    aes(
      x = duree_campagne,
    )
  ) +
  geom_histogram(
    binwidth = 1,
    fill = "steelblue",
  ) +
  scale_x_continuous(
    breaks = seq(0, 100, 5),
  ) +
  scale_y_continuous(
    labels = label_number(scale_cut = cut_short_scale()),
  ) +
  labs(
    title = "Distribution de la dur√©e des campagnes Kickstarter",
    x = "Dur√©e (jours)",
    y = "Nombre de projets",
  ) +
  theme_minimal()
```

On remarque que l'immense majorit√© des campagnes durent 30 jours, soit 1 mois. La deuxi√®me dur√©e la plus populaire est 60 jours, ce qui correspond √† 2 mois.

On voit √©galement des pics sur tous les multiples de 5 jours.

### Analyses Exploratoires

On cherche √† √©tudier les possibles corr√©lations entre le montant demand√©, le montant r√©colt√©, le nombre de backers et le r√©sultat de la campagne :

```{r}
enable_generate_ggpairs <- FALSE
```

```{r}
if (enable_generate_ggpairs) {
data_kickstarter_corr_money <- data_kickstarter %>%
  select(usd_goal_real, usd_pledged_real, state, backers)

data_kickstarter_corr_money %>%
  ggpairs(
    aes(
      color = state,
    ),
    lower = list(continuous = "points", combo = "dot_no_facet"),
  ) +
  theme_minimal(base_size = 8) +
  theme(axis.text = element_text(size = 3))
}
```

On observe d√©j√† un ph√©nom√®ne int√©ressant :

Les projets qui demandent un montant tr√®s √©lev√© ont tendance √† √©chouer ou √™tre annul√©, et n'atteignent jamais le montant demand√©.

A contrario, les projets qui re√ßoivent un montant tr√®s √©lev√© de financement ont demand√© √† la base une somme beaucoup plus raisonnable.

On observe ainsi une claire dichotomie dans les graphes du c√¥t√© inf√©rieur gauche, entre des projets qui re√ßoivent √©norm√©ment de fonds avec un objectif √† la base tr√®s raisonnable, et des projets demandant un montant tr√®s √©lev√© recevant des sommes tr√®s raisonnables et donc insuffisantes.

A noter: Cette analyse ne prend en compte que les projets dont le *goal* ou le *pledged* est relativement √©lev√©. Or, comme on le voit dans les graphes de la diagonale, l'immense majorit√© des projets ont un *goal* et un *pledged* peu √©lev√©s qui les rend quasi invisible dans ce graphe.

Refaisons la m√™me analyse en retirant les montants tr√®s √©lev√©s.

```{r}
if (enable_generate_ggpairs) {
data_kickstarter_corr_small_money <- data_kickstarter_corr_money %>%
  filter(usd_goal_real < 10000 & usd_pledged_real < 10000)

data_kickstarter_corr_small_money %>%
  ggpairs(
    aes(
      color = state,
    ),
    lower = list(continuous = "points", combo = "dot_no_facet")
  ) +
  theme_minimal(base_size = 8) +
  theme(axis.text = element_text(size = 3))
}
```

Pas s√ªr pour celle-ci

On fait la m√™me analyse avec les dur√©es de campagne pour voir si la dur√©e de campagne a un lien avec la r√©ussite d'une campagne

```{r}
if (enable_generate_ggpairs) {
data_kickstarter <- data_kickstarter %>%
  mutate(
    duree_campagne_num =  as.numeric(duree_campagne)/86400
  )

data_kickstarter_corr_time <- data_kickstarter %>% select(duree_campagne_num,usd_pledged_real,backers,state)

# data_kickstarter_corr_time <- data_kickstarter_corr_time %>% filter(usd_pledged_real>500)

ggpairs(data_kickstarter_corr_time,columns = 1:3, aes(color = state),
  # upper = list(continuous = "density", combo = "ggally_box_no_facet", discrete = "count", na = "na"),
  lower = list(continuous = "points", combo = "dot_no_facet")) +
  theme_minimal() +
  theme(axis.text = element_text(size = 3))
}
```

### Quels sont les taux de r√©ussite des campagnes en fonction des cat√©gories ?

Nous allons analyser les taux de r√©ussite des campagnes Kickstarter en fonction des cat√©gories. Cette analyse nous permettra d'identifier les cat√©gories qui r√©ussissent le mieux et celles qui rencontrent plus de difficult√©s.

#### Nombre total de campagnes Kickstarter par cat√©gorie

Dans un premier temps, nous allons commencer par regarder le nombre total de campagnes Kickstarter par cat√©gorie. Cela nous permettra de voir si certaines cat√©gories sont sur-repr√©sent√©es ou sous-repr√©sent√©es.

```{r}
main_category_data <- data_kickstarter %>%
  group_by(main_category) %>%
  summarise(
    total = n(),
    successful = sum(state == "successful"),
    success_rate = successful / total,
    .groups = "drop",
  ) %>%
  arrange(desc(success_rate))

category_data <- data_kickstarter %>%
  group_by(main_category, category) %>%
  summarise(
    total = n(),
    successful = sum(state == "successful"),
    success_rate = successful / total,
    .groups = "drop",
  ) %>%
  arrange(main_category, desc(success_rate))
```

```{r}
main_category_data %>%
  ggplot(
    aes(
      area = total,
      fill = success_rate,
      label = main_category,
    )
  ) +
  geom_treemap() +
  geom_treemap_text(
    place = "center",
    color = "white",
  ) +
  scale_fill_continuous(
    limits = c(0, 1),
    breaks = seq(0, 1, 0.25),
    labels = percent_format(),
    low = "#001900",
    high = "#4dff4d",
  ) +
  labs(
    title = "R√©partition des campagnes Kickstarter par cat√©gorie et leur taux de r√©ussite",
    fill = "Taux de r√©ussite",
  ) +
  theme(
    legend.position = "bottom",
    legend.title.position = "top",
    legend.key.width = unit(1, "cm"),
  )
```

```{r}
category_data %>%
  ggplot(
    aes(
      area = total,
      fill = success_rate,
      label = category,
      subgroup = main_category,
    )
  ) +
  geom_treemap() +
  geom_treemap_subgroup_border() +
  geom_treemap_subgroup_text(
    place = "center",
    color = "white",
    alpha = 0.5,
    fontface = "italic",
  ) +
  geom_treemap_text(
    place = "center",
    color = "white",
    reflow = TRUE,
  ) +
  scale_fill_continuous(
    limits = c(0, 1),
    breaks = seq(0, 1, 0.25),
    labels = percent_format(),
    low = "#001900",
    high = "#4dff4d",
  ) +
  labs(
    title = "R√©partition des campagnes Kickstarter par sous-cat√©gorie et leur taux de r√©ussite",
    fill = "Taux de r√©ussite",
  ) +
  theme(
    legend.position = "bottom",
    legend.title.position = "top",
    legend.key.width = unit(1, "cm"),
  )
```

Cette visualisation montre que certaines cat√©gories, comme **Film & Video** et **Music**, ont un nombre tr√®s √©lev√© de campagnes, tandis que d'autres, comme **Dance**, en ont beaucoup moins. On observe aussi un √©cart significatif entre **Film & Video** et **Dance**.

#### Taux de r√©ussite des campagnes Kickstarter par cat√©gorie

Examinons maintenant le taux de r√©ussite pour chaque cat√©gorie. Pour cela, nous allons regarder le pourcentage de projets r√©ussis dans une cat√©gorie.

```{r}
main_category_data %>%
  ggplot(
    aes(
      x = reorder(main_category, success_rate),
      y = success_rate,
    )
  ) +
  geom_col(
    fill = "forestgreen",
  ) +
  scale_y_continuous(
    labels = percent_format(),
  ) +
  labs(
    title = "Taux de r√©ussite des campagnes Kickstarter par cat√©gorie",
    x = "Cat√©gorie",
    y = "Taux de r√©ussite",
  ) +
  theme_minimal() +
  coord_flip()
```

Dans cette visualisation, nous observons que les cat√©gories **Dance**, **Theater** et **Comics** affichent les taux de r√©ussite les plus √©lev√©s, avec notamment pr√®s de **60%** de r√©ussite pour ces deux cat√©gories. Cela peut s'expliquer par une communaut√© plus engag√©e ou des projets bien cibl√©s dans ces domaines.

En revanche, les cat√©gories comme **Technology** et **Journalism** ont les taux de r√©ussite les plus faibles, autour de **20%**. Cela peut √™tre d√ª √† des projets plus complexes avec des co√ªts beaucoup plus √©lev√©s.

Cela peut expliquer en partie les diff√©rences de taux de r√©ussite : les cat√©gories avec moins de projets peuvent avoir une communaut√© plus cibl√©e et engag√©e.

#### R√©partition des montants demand√©s par cat√©gorie

Enfin, analysons la r√©partition des montants demand√©s dans chaque cat√©gorie possible de projets. Cela nous permettra de v√©rifier si certaines cat√©gories ont des budgets aux des montants plus √©lev√©s ou plus faibles.

```{r}
data_kickstarter %>%
  mutate(
    goal_category = case_when(
      goal < 1000 ~ "< 1k",
      goal < 10000 ~ "1k - 10k",
      goal < 50000 ~ "10k - 50k",
      goal < 100000 ~ "50k - 100k",
      TRUE ~ "> 100k"
    )
  ) %>%
  group_by(main_category) %>%
  mutate(total_projects = n()) %>%
  ungroup() %>%
  group_by(main_category, goal_category) %>%
  summarise(
    project_count = n(),
    total_projects = first(total_projects),
    normalized_count = (project_count / total_projects),
    .groups = "drop"
  ) %>%
  ungroup() %>%
  mutate(goal_category = factor(goal_category, levels = c("< 1k", "1k - 10k", "10k - 50k", "50k - 100k", "> 100k"))) %>%
  ggplot(
    aes(
      x = reorder(main_category, total_projects),
      y = normalized_count, fill = goal_category
    ),
  ) +
  geom_bar(
    stat = "identity",
    position = position_stack(reverse = TRUE),
  ) +
  scale_y_continuous(
    labels = percent_format(),
  ) +
  scale_fill_manual(
    values = c(
      "< 1k" = "forestgreen",
      "1k - 10k" = "green",
      "10k - 50k" = "gold",
      "50k - 100k" = "darkorange",
      "> 100k" = "red"
    )
  ) +
  labs(
    title = "R√©partition des projets par cat√©gorie et montant demand√©",
    x = "Cat√©gorie",
    y = "R√©partition des projets",
    fill = "Montant demand√© (USD)",
  ) +
  theme_minimal() +
  theme(
    legend.position = "bottom",
    legend.title.position = "top",
    text = element_text(size = 10),
  ) +
  coord_flip()
```

Ce graphique r√©v√®le que certaines cat√©gories, comme **Technology**, ont une proportion plus √©lev√©e de projets demandant des montants importants (2/3 des projets √† plus de 10 000 dollars). A l'inverse la cat√©gorie **Dance** regroupe des projets de plus petits montants (80% en dessous de 10 000 dollars).

Les projets n√©cessitant des financements plus importants, comme ceux de la cat√©gorie **Technology**, ont souvent des taux de r√©ussite plus faibles car ils impliquent des besoins financiers plus lourds. √Ä l'inverse, des cat√©gories comme **Dance** demandent des budgets plus modestes, ce qui permet √† un plus grand nombre de projets de r√©ussir sans exiger des sommes trop importantes.

Une exception notable est la cat√©gorie **Journalism** qui, malgr√© des besoins financiers modestes, embarque peu de contributeurs, ce qui peut expliquer son faible taux de r√©ussite.

### Combien de projets sont lanc√©s par pays ? Quelle proportion de projets r√©ussis ?

```{r}
data_kickstarter %>%
  ggplot(
    aes(
      x = reorder(country, table(country)[country]),
    )
  ) +
  geom_bar(
    fill = "steelblue",
  ) +
  scale_y_log10(
    breaks = c(10, 100, 1000, 10000, 30000, 100000, 300000),
    labels = label_number(scale_cut = cut_short_scale()),
  ) +
  labs(
    title = "Nombre de projets Kickstarter par pays",
    x = "Pays",
    y = "Nombre de projets",
    caption = "Note de lecture: l'axe des ordonn√©es est logarithmique",
  ) +
  coord_flip() +
  theme_minimal(base_size = 11)
```

```{r}
# Cr√©ation d'un dataframe avec le nombre total de projets par pays
data_kickstarter %>%
  count(country, name = "projects") %>%
  as_tibble() %>%
  ggplot(
    aes(
      area = projects,
      fill = projects,
      label = country,
    )
  ) +
  geom_treemap(
    show.legend = FALSE,
  ) +
  geom_treemap_text(
    place = "center",
    color = "white",
    grow = TRUE,
    reflow = TRUE,
  ) +
  labs(
    title = "R√©partition des projets Kickstarter par pays",
    subtitle = "Surface proportionnelle au nombre de projets",
  )
```

```{r}
# Pr√©paration de la visualisation de la carte du monde
mapdata <- map_data("world") %>%
  rename(country = region)

# G√©n√©ration de la visualisation de la carte du monde
mapdata_projects <- left_join(
  mapdata,
  data_kickstarter %>% count(country, name = "projects"),
  by = "country"
) %>%
  ggplot(
    aes(
      x = long,
      y = lat,
      group = group,
    )
  ) +
  geom_polygon(
    aes(
      fill = projects,
    ),
    color = "grey60",
    linewidth = 0.2,
  ) +
  scale_fill_gradient(
    low = "lightblue",
    high = "steelblue",
    na.value = "lightgrey",
    trans = "log10",
    breaks = c(1, 10, 100, 1000, 10000, 100000),
    labels = label_comma(big.mark = " "),
  ) +
  labs(
    title = "Nombre de projets Kickstarter par pays",
    fill = "Nombre de projets",
    caption = "Les pays sans donn√©es sont affich√©s en gris clair",
  ) +
  theme_minimal() +
  theme(
    axis.title = element_blank(),
    axis.text = element_blank(),
    axis.ticks = element_blank(),
    panel.grid = element_blank(),
    legend.position = "bottom",
    legend.key.width = unit(2, "cm"),
  )
```

Ce graphique repr√©sente la quantit√© de projets lanc√©s sur Kickstarter par pays.

On remarque une grande sur-repr√©sentation des √âtats-Unis, pays de cr√©ation de Kickstarter.

On remarque ensuite une pro√©minence des pays anglo-saxons dans les pays dont le plus de projets sont valid√©s.

On peut lier cela au fait que Kickstarter a √©t√© lanc√© progressivement dans le monde. Pour avoir une vision qui refl√®te mieux la popularit√© de Kickstarter, on pourrait comparer les quantit√©s de projets selon le temps dans un prochain livrable. On peut √©galement expliquer cela par le fait que, dans de nombreux pays, une offre plus locale et adapt√©e a eu le temps de se d√©velopper, avant l'arriv√©e de Kickstarter ou en parall√®le.

```{r}
# S√©lection des 10 pays avec le plus de projets
top_ten_countries <- data_kickstarter %>%
  count(country, sort = TRUE) %>%
  slice_head(n = 10) %>%
  pull(country)

# Calcul du cumul des projets par pays
data_kickstarter_top_ten_countries <- data_kickstarter %>%
  group_by(country) %>%
  arrange(launched) %>%
  mutate(cumulative_count = row_number()) %>%
  filter(country %in% top_ten_countries)

# Extraction du point maximal pour chaque pays (pour annotation)
max_cumul <- data_kickstarter_top_ten_countries %>%
  group_by(country) %>%
  filter(cumulative_count == max(cumulative_count)) %>%
  ungroup()

# Visualisation de la croissance cumul√©e des projets par pays (Top 10)
ggplot(data_kickstarter_top_ten_countries, aes(
    x = launched,
    y = cumulative_count,
    color = country,
    group = country
  )) +
  geom_line() +
  geom_label_repel(
    data = max_cumul,
    aes(label = country),
    nudge_x = 150,
    direction = "y",
    hjust = "left",
    size = 2.5,
    min.segment.length = 0,
    max.overlaps = Inf,
    arrow = arrow(length = unit(0.015, "npc"))
  ) +
  scale_x_date(
    limits = c(as.Date("2009-01-01"), as.Date("2018-12-31")),
    date_breaks = "1 year",
    date_labels = "%Y"
  ) +
  scale_y_continuous(
    labels = label_number(scale_cut = cut_short_scale()),
  ) +
  labs(
    title = "Croissance cumul√©e du nombre de projets Kickstarter (Top 10 pays)",
    x = "Date de lancement",
    y = "Nombre cumul√© de projets"
  ) +
  theme_minimal() +
  theme(legend.position = "none")
```

On remarque que la quantit√© de projets des √âtats-Unis et en partie d√ªe √† une avance accumul√©e: De 2009 √† 2013, Kickstarter √©tait disponible uniquement aux √âtats-unis.

Faisons un zoom sur les autres pays du Top 10 qui ne sont pas les √âtats-Unis :

```{r}
# Exclure les √âtats-Unis pour se concentrer sur les autres pays du Top 10
data_kickstarter_top_ten_countries_no_US <- data_kickstarter_top_ten_countries %>%
  filter(country != "USA")

# Calculer le point maximal pour chaque pays (pour annotation)
max_cumul_no_US <- data_kickstarter_top_ten_countries_no_US %>%
  group_by(country) %>%
  filter(cumulative_count == max(cumulative_count)) %>%
  ungroup()

# Visualisation de la croissance cumul√©e des projets par pays (hors USA)
data_kickstarter_top_ten_countries_no_US %>%
  ggplot(
    aes(
      x = launched,
      y = cumulative_count,
      color = country,
    )
  ) +
  geom_line(linewidth = 1) +
  geom_label_repel(
    data = max_cumul_no_US,
    aes(label = country),
    nudge_x = 150,
    direction = "y",
    hjust = "left",
    size = 2.5,
    min.segment.length = 0,
    max.overlaps = Inf,
    arrow = arrow(length = unit(0.015, "npc"))
  ) +
  xlim(as.Date("2013-01-01"), as.Date("2018-01-03")) +
  scale_x_date(
    date_breaks = "1 year",
    date_labels = "%Y",
    expand = expansion(mult = 0.05)
  ) +
  scale_y_continuous(
    labels = label_number(scale_cut = cut_short_scale()),
  ) +
  labs(
    title = "Croissance cumul√©e du nombre de projets Kickstarter (Top 10 pays hors USA)",
    x = "Date de lancement",
    y = "Nombre cumul√© de projets"
  ) +
  theme_minimal() +
  theme(legend.position = "none")
```

On remarque que les pays o√π Kickstarter arrive plus t√¥t ont une croissance plus forte du nombre de projets lanc√©s.

Cela peut s'expliquer par le fait que l'implantation rapide de son service permet de se faire une meilleure place dans le march√©. Pass√© 2014, Kickstarter s'est install√© dans des pays o√π une offre de financement participatif concurrente s'√©tait d√©j√† d√©velopp√© avant son arriv√©e, ce qui n'est pas le cas aux √âtats-Unis o√π le concept √©tait novateur en 2009.

Par exemple en France, Kickstarter est rarement cit√© comme la meilleure plateforme de crowdfunding: <https://bpifrance-creation.fr/encyclopedie/financements/financement-participatif/sites-plateformes-crowdfunding>

Des services plus adapt√©s se sont implant√©s avant son arriv√©e.

Dans la visualisation suivante, nous allons √©valuer la r√©partition des projets selon leur statut dans les pays du top 10:

```{r}
data_kickstarter_top_ten_countries %>%
  ggplot(
    aes(
      x = reorder(country, -table(country)[country]),
      fill = state,
    )
  ) +
  geom_bar(
    position = "fill",
  ) +
  scale_fill_manual(
    breaks = c("suspended", "canceled", "failed", "live", "successful"),
    values = c("grey", "orange", "red", "blue", "green"),
  ) +
  scale_y_continuous(
    labels = percent_format(),
  ) +
  labs(
    title = "R√©partition des statuts des projets selon le pays",
    x = "Code Pays",
    y = "",
    fill = "Statut",
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 30, size = 9))
```

On remarque que tous les pays ont des taux d'√©chec et de r√©ussite relativement similaires.

On remarque une grande proportion de projets en cours au Japon. Cela s'explique par le fait que Kickstarter a √©t√© lanc√© en Septembre 2017 au Japon, soit un an avant la finalisation de notre base de donn√©e en 2018. Ainsi, il est attendu d'avoir une sur-repr√©sentation de projets en cours de financement: <https://www.theverge.com/2017/8/17/16161068/kickstarter-japan-launch-september>

```{r}
success_rates_by_country <- data_kickstarter %>%
  group_by(country) %>%
  summarise(
    total = n(),
    successful = sum(state == "successful"),
    success_rate = successful / total
  ) %>%
  arrange(desc(success_rate))

success_rates_by_country %>%
  ggplot(
    aes(
      x = reorder(country, success_rate),
      y = success_rate,
    )
  ) +
  geom_col(
    fill = "forestgreen"
  ) +
  scale_y_continuous(
    labels = percent_format()
  ) +
  labs(
    title = "Taux de r√©ussite des campagnes Kickstarter par pays",
    x = "Pays",
    y = "Taux de r√©ussite",
  ) +
  theme_minimal() +
  coord_flip()
```

```{r}
mapdata %>% left_join(
  success_rates_by_country,
  by = "country"
) %>%
  ggplot(
    aes(
      x = long,
      y = lat,
      group = group,
    )
  ) +
  geom_polygon(
    aes(
      fill = success_rate,
    ),
    color = "grey60",
    linewidth = 0.2,
  ) +
  scale_fill_gradient(
    low = "lightgreen",
    high = "darkgreen",
    na.value = "lightgrey",
    labels = percent_format(),
  ) +
  labs(
    title = "Taux de r√©ussite des campagnes Kickstarter par pays",
    fill = "Taux de r√©ussite",
  ) +
  theme_minimal() +
  theme(
    axis.title = element_blank(),
    axis.text = element_blank(),
    axis.ticks = element_blank(),
    panel.grid = element_blank(),
    legend.position = "bottom",
    legend.key.width = unit(1, "cm"),
  )
```

On constate que les taux de r√©ussite varient beaucoup selon le pays, de 37% √† 15%. On constate que les deux pays avec le plus haut taux de r√©ussite sont aussi ceux qui ont le plus de projets (mais ce n'est pas le cas au del√† des deux premiers). Dans la suite de notre rapport, nous pourrions √©valuer s'il existe une corr√©lation entre le nombre de projets lanc√©s dans chaque pays et leur taux de r√©ussite.

```{r}
success_rates_by_country %>%
  filter(country != "USA") %>%
  ggplot(
    aes(
      x = total,
      y = success_rate,
      label = country,
    )
  ) +
  geom_point() +
  geom_label_repel(
    min.segment.length = 0,
    max.overlaps = Inf,
    size = 2,
  ) +
  scale_x_continuous(
    labels = label_number(scale_cut = cut_short_scale()),
  ) +
  scale_y_continuous(
    labels = percent_format(),
  ) +
  labs(
    title = "Corr√©lation entre le nombre de projets et le taux de r√©ussite (hors USA)",
    x = "Nombre total de projets",
    y = "Taux de r√©ussite",
    caption = "Les points repr√©sentent les pays hors USA",
  ) +
  theme_minimal()
```

Il n'y a pas de lien clair entre la quantit√© de projet et le taux de r√©ussite, la majorit√© des pays avec des quantit√©s de projets tr√®s similaires ont des taux de r√©ussites tr√®s vari√©s.

### Existe-t-il des p√©riodes de l'ann√©e o√π les campagnes ont plus de chances de r√©ussir ?

```{r}
data_kickstarter %>%
  group_by(launch_month, launch_day) %>%
  summarise(
    total = n(),
    success = sum(state == "successful"),
    success_rate = success / total,
    .groups = "drop",
  ) %>%
  ggplot(
    aes(
      x = launch_month,
      y = success_rate,
    )
  ) +
  geom_boxplot(
    fill = "skyblue",
    color = "darkblue",
  ) +
  scale_y_continuous(
    labels = percent_format(),
  ) +
  labs(
    title = "Distribution quotidienne du taux de r√©ussite par mois",
    x = "Mois",
    y = "Taux de r√©ussite journalier",
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 30))
```

Ce graphique illustre le taux de r√©ussite mensuel des campagnes Kickstarter selon la date de lancement. On observe que ce taux fluctue dans une plage relativement √©troite, comprise entre 0,29 et 0,38. Bien que les taux de r√©ussite semblent similaires, des tendances notables se d√©gagent, qui peuvent √™tre expliqu√©es par des facteurs contextuels.

En particulier, on remarque un **taux de r√©ussite plus faible en d√©cembre**, probablement en raison des p√©riodes de f√™tes. Pendant ce mois, de nombreuses personnes privil√©gient l'achat de cadeaux plut√¥t que de contribuer √† des campagnes de financement participatif. Cela pourrait expliquer la baisse de l'engagement.

Par ailleurs, une tendance saisonni√®re appara√Æt durant l'√©t√©, p√©riode de vacances o√π les d√©penses personnelles sont souvent consacr√©es √† des loisirs, notamment les voyages. L'augmentation des co√ªts li√©s aux voyages pourrait r√©duire la capacit√© des individus √† financer des projets, ce qui se traduit par une l√©g√®re diminution du taux de r√©ussite des campagnes lanc√©es pendant cette p√©riode.

On peut se demander si la corr√©lation se poursuit au niveau de la cloture des campagnes ?

```{r}
data_kickstarter %>%
  group_by(deadline_month, deadline_day) %>%
  summarise(
    total = n(),
    success = sum(state == "successful"),
    success_rate = success / total,
    .groups = "drop",
  ) %>%
  ggplot(aes(x = deadline_month, y = success_rate)) +
  geom_boxplot(
    fill = "skyblue",
    color = "darkblue",
  ) +
  scale_y_continuous(
    labels = percent_format(),
  ) +
  labs(
    title = "Distribution quotidienne du taux de r√©ussite par mois",
    x = "Mois",
    y = "Taux de r√©ussite journalier",
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 30))
```

Ce graphique illustre le taux de r√©ussite mensuel des campagnes Kickstarter en fonction de leur date de cl√¥ture. On observe que les taux sont similaires √† ceux bas√©s sur la date de lancement, mais d√©cal√©s d'un mois.

Pour v√©rifier si cela est possible, il faut qu'on observe la dur√©e des campagnes ?

```{r}
# Trouver la derni√®re ann√©e
derniere_annee <- max(data_kickstarter$launch_year, na.rm = TRUE)

# Calcul de la moyenne uniquement pour la derni√®re ann√©e
moyenne_duree_derniere_annee <- data_kickstarter %>%
  filter(launch_year == derniere_annee) %>%
  summarise(moyenne = mean(duree_campagne, na.rm = TRUE)) %>%
  pull(moyenne)

data_kickstarter %>%
  ggplot(
    aes(
      x = launch_year,
      y = duree_campagne,
    )
  ) +
  geom_boxplot(
    fill = "skyblue",
    color = "darkblue",
  ) +
  geom_hline(
    yintercept = moyenne_duree_derniere_annee,
    linetype = "dashed",
    color = "red",
  ) +
  annotate(
    geom = "text",
    x = derniere_annee,
    y = moyenne_duree_derniere_annee + 50,
    label = paste("Moyenne en", derniere_annee, "=", round(moyenne_duree_derniere_annee, 1), "jours"),
    color = "red",
    hjust = 1,
    size = 4,
    fontface = "italic",
  ) +
  labs(
    title = "√âvolution de la dur√©e des campagnes Kickstarter par ann√©e",
    x = "Ann√©e de lancement",
    y = "Dur√©e de la campagne (jours)",
  ) +
  theme_minimal() +
  theme(
    panel.grid.minor = element_blank(),
    plot.title = element_text(face = "bold"),
  )
```

Ce graphique repr√©sente la dur√©e des campagnes sur Kickstarter, exprim√©e en jours. On peut observer que la dur√©e des campagnes diminue depuis 2009 pour passer d'environ 2 mois a 1 mois en moyenne. Cette observation confirme l'hypoth√®se pr√©c√©demment formul√©e : le d√©calage d'un mois observ√© entre les taux de r√©ussite selon que l'on se base sur la date de lancement ou sur la date de cl√¥ture s'explique par la dur√©e moyenne des campagnes. Ainsi, d'apr√®s nos analyses, les p√©riodes les plus favorables au succ√®s d'un projet se situent entre f√©vrier et juin, ainsi qu'entre septembre et novembre.

### Quelle est la dur√©e id√©ale d'une campagne ?

Comme nous l'avons vu pr√©c√©demment, la majorit√© des campagnes durent 30 jours. C'est la valeur par d√©faut de la dur√©e dans l'interface de cr√©ation de campagne, o√π il est aussi affirm√© que les campagnes de moins de 30 jours ont plus de chances de r√©ussir. Est-ce vrai?

```{r}
data_kickstarter %>%
  group_by(duree_campagne) %>%
  summarise(
    total = n(),
    successful = sum(state == "successful"),
    success_rate = successful / total,
  ) %>%
  arrange(desc(success_rate)) %>%
  ggplot(
    aes(
      x = duree_campagne,
      y = success_rate,
    )
  ) +
  geom_line() +
  geom_smooth() +
  scale_x_continuous(
    breaks = seq(0, 100, 10),
  ) +
  scale_y_continuous(
    labels = percent_format(),
  ) +
  theme_minimal()
```

On peut observer qu'une campagne inf√©rieur a 40 jours √† un taux de r√©ussite de 40% √† 50% alors qu'ensuite, le taux chute jusqu'√† 30%. On en d√©duis donc qu'une dur√©e id√©ale de campagne est de 20 √† 25 jours avec un taux de r√©ussite √† 50%.

### Comment les montants demand√©s et r√©colt√©s ont-ils √©volu√© au cours du temps ?

#### Evolution brute des montants

Dans cette partie, nous nous int√©rresserons √† l'√©volution des montants demand√©s et r√©colt√©s par les campagnes kickstarter selon les √©poques.

Tout d'abord, nous allons repr√©senter le montant moyen demand√© selon l'ann√©e

```{r}
data_kickstarter %>%
  mutate(
    launch_year = year(launched)
  ) %>%
  group_by(launch_year) %>%
  summarise(
    mean_goal = mean(usd_goal_real, na.rm = TRUE),
    median_goal = median(usd_goal_real, na.rm = TRUE),
    mean_pledge = mean(usd_pledged_real, na.rm = TRUE),
    median_pledge = median(usd_pledged_real, na.rm = TRUE),
  ) %>%
  gather("type_stat", "value", -launch_year,) %>%
  ggplot(
    aes(
      x = launch_year,
      y = value,
      color = type_stat,
    )
  ) +
  geom_line(
    linewidth = 1.3,
  ) +
  geom_point() +
  scale_x_continuous(
    limits = c(2009, 2017),
    breaks = seq(2009, 2017, 1),
  ) +
  scale_y_continuous(
    labels = label_number(scale_cut = cut_short_scale()),
  ) +
  scale_color_manual(
    values = c(
      "mean_goal" = "blue",
      "median_goal" = "darkblue",
      "mean_pledge" = "green",
      "median_pledge" = "darkgreen"
    ),
    labels = c(
      "mean_goal" = "Montant moyen demand√©",
      "median_goal" = "Montant m√©dian demand√©",
      "mean_pledge" = "Montant moyen r√©colt√©",
      "median_pledge" = "Montant m√©dian r√©colt√©"
    )
  ) +
  labs(
    title = "√âvolution des montants demand√©s et r√©colt√©s par ann√©e",
    x = "Ann√©e de lancement",
    y = "Montant (USD)",
    color = "Statistiques",
  ) +
  theme_minimal()
```

On voit que l'objectif m√©dian devient plus ambitieux, alors que les montants r√©colt√©s ont eux tendance √† baisser depuis 2013.

#### Quels sont les pourcentages de compl√©tion des campagnes r√©ussies?

Nous allons √©tudier l'√©volution des pourcentages de compl√©tion des projets r√©ussis

```{r}
data_kickstarter %>%
  filter(state == "successful") %>%
  mutate(
    completion_percentage = usd_pledged_real / usd_goal_real,
  ) %>%
  ggplot(
    aes(
      x = launch_year,
      y = completion_percentage,
    )
  ) +
  geom_boxplot() +
  scale_y_continuous(
    labels = percent_format(),
    limits = c(0.75, 2),
  ) +
  theme_minimal()
```

```{r}
data_kickstarter %>%
  filter(state == "successful") %>%
  mutate(
    completion_percentage = usd_pledged_real / usd_goal_real,
  ) %>%
  ggplot(
    aes(
      x = launch_year,
      y = completion_percentage,
    )
  ) +
  geom_boxplot() +
  scale_y_continuous(
    labels = percent_format()
  ) +
  theme_minimal()
```

On remarque que l'immense majorit√© des projets r√©ussis d√©passent de peu leur objectif, et ce peu importe l'√©poque.

On remarque cependant qu'au fil des ann√©es de plus en plus de projets pulv√©risent leur objectif, et dans des proportions de plus en plus grandes

### Le choix des mots dans le titre d'une campagne a-t-il un impact sur son succ√®s ?

#### La longueur du titre influence-t-elle le taux de succ√®s d'une campagne ?

```{r}
data_kickstarter %>%
  mutate(
    title_length_words = nchar(name)
  ) %>%
  group_by(state) %>%
  summarise(
    mean_length = mean(title_length_words, na.rm = TRUE)
  ) %>%
  ggplot(
    aes(
      x = state,
      y = mean_length,
      fill = state,
    )
  ) +
  geom_col() +
  geom_text(
    aes(label = comma(mean_length, big.mark = " ")),
    vjust = -0.3,
    size = 3,
  ) +
  labs(
    title = "Comparaison du nombre moyen de mots dans les titres selon l'√©tat du projet",
    x = "√âtat du projet",
    y = "Nombre moyen de mots",
  ) +
  theme_minimal()
```

D'apr√®s ce graphique nous pouvons observer qu'il semble y avoir une relation entre la taille du titre et le fait qu'il r√©ussie ou pas. Les projet qui sont successful ont en moyenne plus de caract√®res qu'un projet qui √©choue, cependant cette diff√©rence n'est pas significative

#### Certains mots dans le titre sont-ils plus fr√©quents dans les campagnes r√©ussies que dans les campagnes √©chou√©es ?

```{r}
# Enlever les mots tr√®s courants ("stop words") si besoin
data("stop_words") # du package tidytext
```

```{r}
data_kickstarter %>%
  filter(state == "successful") %>%
  select(name) %>%
  unnest_tokens(word, name) %>%
  anti_join(stop_words, by = "word") %>%
  count(word, sort = TRUE) %>%
  slice_max(n, n = 20) %>%
  ggplot(
    aes(
      x = reorder(word, n),
      y = n,
    )
  ) +
  geom_col(
    fill = "forestgreen",
  ) +
  coord_flip() +
  labs(
    title = "Mots les plus fr√©quents dans les projets Kickstarter r√©ussis",
    x = "Mot",
    y = "Fr√©quence",
  ) +
  theme_minimal()
```

Qu'en est il pour les campagnes non r√©ussie ?

```{r}
data_kickstarter %>%
  filter(state == "failed") %>%
  select(name) %>%
  unnest_tokens(word, name) %>%
  anti_join(stop_words, by = "word") %>%
  count(word, sort = TRUE) %>%
  slice_max(n, n = 20) %>%
  ggplot(
    aes(
      x = reorder(word, n),
      y = n,
    )
  ) +
  geom_col(
    fill = "darkred",
  ) +
  coord_flip() +
  labs(
    title = "Mots les plus fr√©quents dans les projets Kickstarter qui ont √©chou√©",
    x = "Mot",
    y = "Fr√©quence",
  ) +
  theme_minimal()
```

On s'aper√ßoit rapidement que les mots les plus utilis√©s n'ont pas de lien avec la r√©ussite ou non d'un projet mais plut√¥t avec les cat√©gories les plus repr√©sent√©s, biaisant ainsi l'analyse des mots fr√©quents dans les titres.

Pour corriger ce biais, nous allons normaliser la fr√©quence des mots en tenant compte de la proportion de chaque cat√©gorie, en multipliant la fr√©quence brute d'un mot par l'inverse de la proportion de sa cat√©gorie.

```{r}
words <- data_kickstarter %>%
  filter(state == "successful") %>%
  select(name, main_category) %>%
  unnest_tokens(word, name)

words_clean <- words %>%
  anti_join(stop_words, by = "word")

# Calculer la proportion de chaque cat√©gorie
category_proportions <- data_kickstarter %>%
  group_by(main_category) %>%
  summarise(category_count = n()) %>%
  mutate(category_proportion = category_count / sum(category_count))

# Compter les mots les plus fr√©quents par cat√©gorie
word_counts <- words_clean %>%
  group_by(word, main_category) %>%
  count() %>%
  left_join(category_proportions, by = "main_category")

# Normaliser la fr√©quence des mots par l'inverse de la proportion de la cat√©gorie
word_counts <- word_counts %>%
  mutate(normalized_frequency = (n / category_proportion))

top_words <- word_counts %>%
  arrange(desc(normalized_frequency)) %>%
  slice_head(n = 20)

top_words <- word_counts %>%
  ungroup() %>%
  arrange(desc(normalized_frequency)) %>%
  slice_head(n = 20)

top_words %>%
  ggplot(
    aes(
      x = reorder(word, normalized_frequency),
      y = normalized_frequency,
    )
  ) +
  geom_col(
    fill = "forestgreen",
  ) +
  coord_flip() +
  labs(
    title = "Mots les plus fr√©quents dans les projets Kickstarter r√©ussis (fr√©quence normalis√©e)",
    x = "Mot",
    y = "Fr√©quence normalis√©e",
  ) +
  theme_minimal()
```

```{r}
words <- data_kickstarter %>%
  filter(state == "failed") %>%
  select(name, main_category) %>%
  unnest_tokens(word, name)

words_clean <- words %>%
  anti_join(stop_words, by = "word")

# Calculer la proportion de chaque cat√©gorie
category_proportions <- data_kickstarter %>%
  group_by(main_category) %>%
  summarise(category_count = n()) %>%
  mutate(category_proportion = category_count / sum(category_count))

# Compter les mots les plus fr√©quents par cat√©gorie
word_counts <- words_clean %>%
  group_by(word, main_category) %>%
  count() %>%
  left_join(category_proportions, by = "main_category")

# Normaliser la fr√©quence des mots par l'inverse de la proportion de la cat√©gorie
word_counts <- word_counts %>%
  mutate(normalized_frequency = (n / category_proportion))
top_words <- word_counts %>%
  arrange(desc(normalized_frequency)) %>%
  slice_head(n = 20)

top_words <- word_counts %>%
  ungroup() %>%
  arrange(desc(normalized_frequency)) %>%
  slice_head(n = 20)

top_words %>%
  ggplot(
    aes(
      x = reorder(word, normalized_frequency),
      y = normalized_frequency,
    )
  ) +
  geom_col(
    fill = "darkred",
  ) +
  coord_flip() +
  labs(
    title = "Mots les plus fr√©quents dans les projets Kickstarter √©chou√©s (fr√©quence normalis√©e)",
    x = "Mot",
    y = "Fr√©quence normalis√©e",
  ) +
  theme_minimal()
```

On voit que malgr√© apr√®s avoir contrebalanc√© l'effet de la sur-repr√©sentations de certaines cat√©gories visible √† travers le titre ne permet pas de trouver des mots particuliers pr√©sent dans le titre des projets qui r√©ussissent ou √©chouent. En dehors des mots qui se trouvent dans les cat√©gories les plus repr√©sent√© ce graphique nous confirme que les cat√©gories tel que le journalisme et le design ont une proportion de projet qui √©chouent √©lev√©. Si une analyse simple des mots pr√©sent dans le titre ne montre rien peut √™tre qu'une analyse plus pouss√© bas√© sur des mots dit expressif ou √† connotation positive ou n√©gative peut avoir un impact.

#### L'utilisation de mots √©motionnels ou marketing dans le titre est-elle corr√©l√©e avec un meilleur taux de succ√®s ?

```{r}
# √âtape 1 : Discr√©tiser les scores en classes (bins)
breaks <- seq(-2, 2, by = 0.1)

# Calculer le score de sentiment pour chaque titre
data_binned <- data_kickstarter %>%
  filter(state == "successful" | state == "failed") %>%
  mutate(
    sentiment_score = get_sentiment(name, method = "syuzhet")
  ) %>%
  mutate(
    sentiment_bin = cut(sentiment_score, breaks = breaks, include.lowest = TRUE),
    # Extraire la borne sup√©rieure de chaque bin
    sentiment_bin_upper = factor(sapply(strsplit(as.character(sentiment_bin), ","), function(x) {
      # Enl√®ve le crochet droit et convertit en num√©rique
      upper <- gsub("]", "", x[2])
      trimws(upper)
    }))
  )

# √âtape 2 : Comptage par bin et par state
data_pyramid <- data_binned %>%
  count(state, sentiment_bin_upper)

# √âtape 3 : Inverser les valeurs pour '√âchou√©' pour cr√©er la pyramide
data_pyramid <- data_pyramid %>%
  mutate(
    n = ifelse(state == "failed", -n, n),
    sentiment_bin_upper = as_factor(sentiment_bin_upper)
  )
```

```{r}
# √âtape interm√©diaire : Retirer les bins proches de z√©ro
# Convertir en facteur ordonn√© selon la valeur num√©rique
data_pyramid <- data_pyramid %>%
  filter(!sentiment_bin_upper %in% c(NA)) %>%
  mutate(
    sentiment_bin_upper = fct_reorder(sentiment_bin_upper, as.numeric(as.character(sentiment_bin_upper)))
  )

# √âtape 4 : Cr√©ation du graphique en pyramide
data_pyramid %>%
  ggplot(
    aes(
      x = n,
      y = sentiment_bin_upper,
      fill = state
    )
  ) +
  geom_col(
    width = 0.9,
  ) +
  scale_fill_manual(
    values = c("failed" = "red", "successful" = "green"),
  ) +
  scale_x_continuous(
    labels = abs,
  ) +
  labs(
    title = "Pyramide : Score de sentiment vs. succ√®s du projet",
    x = "Nombre de projets",
    y = "Borne sup√©rieure du score de sentiment",
    fill = "√âtat du projet",
  ) +
  theme_minimal()
```

Une grand majorit√© des projets n'ont pas de titre avec une valeur √©motionelle , pour y voir plus clair nous alons les retirer du graphique.

```{r}
# √âtape interm√©diaire : Retirer les bins proches de z√©ro
# Convertir en facteur ordonn√© selon la valeur num√©rique
data_pyramid <- data_pyramid %>%
  filter(!sentiment_bin_upper %in% c(0))

# √âtape 4 : Cr√©ation du graphique en pyramide
data_pyramid %>%
  ggplot(
    aes(
      x = n,
      y = sentiment_bin_upper,
      fill = state
    )
  ) +
  geom_col(
    width = 0.9,
  ) +
  scale_fill_manual(
    values = c("failed" = "red", "successful" = "green"),
  ) +
  scale_x_continuous(
    labels = abs,
  ) +
  labs(
    title = "Pyramide : Score de sentiment vs. succ√®s du projet",
    x = "Nombre de projets",
    y = "Borne sup√©rieure du score de sentiment",
    fill = "√âtat du projet",
  ) +
  theme_minimal()
```

Ce graphique illustre la corr√©lation entre le sentiment des titres des projets Kickstarter (mesur√© par la m√©thode Syuzhet, de -2 √† 2) et leur succ√®s, distinguant les projets "√âchou√©s" (rouge) et "R√©ussis" (vert).

```{r}
# √âtape 1 : Pr√©paration des donn√©es : tableau avec nb de projets par bin et par √©tat
data_success_rate <- data_pyramid %>%
  mutate(n_abs = abs(n)) %>%
  group_by(sentiment_bin_upper, state) %>%
  summarise(n = sum(n_abs), .groups = "drop") %>%
  pivot_wider(names_from = state, values_from = n, values_fill = 0) %>%
  mutate(
    total = successful + failed,
    success_rate = successful / total * 100
  )

# √âtape 2 : Graphique du pourcentage de r√©ussite
data_success_rate %>%
  ggplot(
    aes(
      x = sentiment_bin_upper,
      y = success_rate
    )
  ) +
  geom_col(
    fill = "blue",
  ) +
  labs(
    title = "Pourcentage de projets r√©ussis par niveau de sentiment",
    x = "Borne sup√©rieure du score de sentiment",
    y = "Pourcentage de projets r√©ussis",
  ) +
  theme_minimal()
```

On observe que la plupart des projets, qu'ils aient r√©ussi ou √©chou√©, ont un score de sentiment proche de 0 (neutre), avec un pic marqu√© √† cette valeur. Cette analyse sugg√®re que le sentiment du titre n'influence que marginalement le succ√®s d'un projet, confirmant que d'autres facteurs pourraient jouer un r√¥le plus d√©terminant dans les r√©sultats des campagnes Kickstarter.

### Dans quelle mesure le montant de l'objectif influence-t-il la probabilit√© de succ√®s d'une campagne ?

On se demande si le montant demand√© lors d'une campagne influence la r√©ussite. On peut se demander si un projet qui demande une somme importante a peu de chance de r√©ussir et inversement si un projet qui demande un budget faible a plus de chance de r√©ussir.

```{r}
data_kickstarter_successful <- data_kickstarter %>%
  filter(state == "successful") %>%
  mutate(
    goal_binned = cut(
      usd_goal_real,
      breaks = c(0, 5000, 10000, 50000, 100000, Inf),
      labels = c("0-5k", "5k-10k", "10k-50k", "50k-100k", "100k+"),
    )
  )

data_kickstarter_successful %>%
  ggplot(
    aes(
      x = goal_binned,
      fill = state,
    )
  ) +
  geom_bar(
    position = "dodge",
  ) +
  labs(
    title = "R√©partition des campagnes r√©ussie par objectif",
    x = "Objectif de financement (cat√©goris√©)",
    y = "Nombre de campagnes",
  ) +
  theme_minimal()
```

On observe que les campagnes ayant le plus de chances de r√©ussir sont celles dont l'objectif se situe entre 0 et 5 000. Ensuite, entre 5 000 et 50 000, le taux de r√©ussite diminue, bien qu'un certain nombre de campagnes parviennent tout de m√™me √† atteindre leur objectif. En revanche, au-del√† de 50 000, tr√®s peu de campagnes atteignent le montant souhait√©. L'hypoth√®se formul√©e se v√©rifie donc : plus la somme demand√©e est faible, plus le taux de r√©ussite est √©lev√©, et inversement, plus le montant demand√© est √©lev√©, moins les chances de r√©ussite sont grandes.

Il y a plus de chance de r√©ussir un projet avec une somme inf√©rieur a 5 000 est du au nombre de projet qui sont plus nombreux dans ces tranches ? On va donc regarder le taux de r√©ussite par tranche de somme.

```{r}
# On cr√©e les cat√©gories d'objectif
data_kickstarter_successful <- data_kickstarter %>%
  mutate(
    goal_binned = cut(
      usd_goal_real,
      breaks = c(0, 5000, 10000, 50000, 100000, Inf),
      labels = c("0-5k", "5k-10k", "10k-50k", "50k-100k", "100k+"),
    )
  )

# On calcule le taux de succ√®s par cat√©gorie
taux_succes <- data_kickstarter_successful %>%
  group_by(goal_binned) %>%
  summarise(
    total = n(),
    succes = sum(state == "successful"),
    taux_succes = round((succes / total) * 100, 2),
  )

taux_succes %>%
  ggplot(
    aes(
      x = goal_binned,
      y = taux_succes,
    ),
  ) +
  geom_col(
    fill = "steelblue",
  ) +
  labs(
    title = "Taux de succ√®s des campagnes par objectif",
    x = "Objectif de financement (cat√©goris√©)",
    y = "Taux de succ√®s (%)",
  ) +
  theme_minimal()
```
